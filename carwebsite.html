<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-CAR | Luxury Collection</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CẤU HÌNH CHUNG --- */
        :root {
            --bg-color: #000000;
            --card-bg: #111;
            --text-white: #ffffff;
            --gold: #D4AF37;
            --font-main: 'Montserrat', sans-serif;
            --font-serif: 'Playfair Display', serif;
        }

        body {
            margin: 0;
            background: var(--bg-color);
            color: var(--text-white);
            font-family: var(--font-main);
            overflow-x: hidden;
        }

        /* --- MENU NGANG --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 50px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            box-sizing: border-box;
        }

        .logo {
            font-family: var(--font-serif);
            font-size: 2em;
            color: var(--gold);
            font-weight: 700;
            letter-spacing: 2px;
            cursor: pointer;
        }

        .menu {
            list-style: none;
            display: flex;
            gap: 30px;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        .menu li a {
            text-decoration: none;
            color: var(--text-white);
            font-weight: 600;
            font-size: 0.9em;
            letter-spacing: 1px;
            transition: 0.3s;
            cursor: pointer;
            text-transform: uppercase;
        }

        .menu li a:hover {
            color: var(--gold);
        }

        /* Nav Icons (Wishlist & Cart) */
        .nav-icon-container {
            position: relative;
            cursor: pointer;
            color: var(--gold);
            font-size: 1.2em;
            margin-left: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border: 1px solid var(--gold);
            border-radius: 5px;
            transition: 0.3s;
        }

        .nav-icon-container:hover {
            background: var(--gold);
            color: #000;
        }

        .badge-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: red;
            color: white;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 50%;
            font-weight: bold;
        }

        .btn-login-nav {
            padding: 10px 25px;
            background: var(--gold);
            color: #000;
            border: none;
            font-weight: bold;
            font-size: 0.9em;
            cursor: pointer;
            margin-left: 30px;
            letter-spacing: 1px;
        }
        
        /* --- PHẦN HERO (TRANG CHỦ) --- */
        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            /* Sử dụng ảnh nền tĩnh thay vì video để tránh lỗi */
            background: url('https://images.pexels.com/photos/3752194/pexels-photo-3752194.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') no-repeat center center/cover;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1;
        }
        
        .hero-text {
            position: relative;
            z-index: 2;
            margin-top: -50px;
        }
        
        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: 5.5em;
            color: var(--text-white);
            text-transform: uppercase;
            margin: 0;
            letter-spacing: 5px;
            font-weight: 400;
        }

        .hero-text p {
            font-family: var(--font-serif);
            font-size: 1.2em;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 20px;
            margin-bottom: 40px;
        }

        .btn-explore {
            padding: 15px 40px;
            background: var(--gold);
            color: #000;
            border: none;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: 0.3s;
            letter-spacing: 1px;
        }

        .btn-explore:hover {
            background: #fff;
        }

        /* --- CÁC PHẦN KHÁC (ẨN MẶC ĐỊNH) --- */
        .section-container {
            display: none;
            padding: 120px 50px;
            min-height: 100vh;
        }
        
        .section-title {
            text-align: center;
            font-size: 3em;
            color: var(--gold);
            margin-bottom: 60px;
            font-family: var(--font-serif);
        }

        /* --- DANH SÁCH XE (GRID) --- */
        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }

        .car-card {
            background: var(--card-bg);
            border-radius: 0;
            overflow: hidden;
            transition: 0.3s;
            border: 1px solid #222;
            position: relative;
        }

        .car-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
        }

        .car-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        /* Nút Wishlist trên card */
        .wishlist-btn-card {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            color: #ccc; /* Màu mặc định (chưa thích) */
            cursor: pointer;
            transition: 0.3s;
            z-index: 10;
        }

        .wishlist-btn-card:hover {
            transform: scale(1.1);
        }

        .wishlist-btn-card.active {
            color: red; /* Màu khi đã thích */
        }

        .car-info {
            padding: 25px;
        }
        
        .car-brand {
            color: #888;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .car-title {
            font-size: 1.6em;
            margin: 10px 0;
            font-family: var(--font-main);
            font-weight: 700;
        }

        .car-price {
            color: var(--gold);
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        .btn-view {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: 1px solid #444;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8em;
        }
        .btn-view:hover { border-color: #fff; }

        .btn-add-cart {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8em;
        }

        .btn-add-cart:hover {
            background: var(--gold);
            color: black;
        }

        /* --- MODAL (LOGIN / REGISTER / WISHLIST / CART) --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 40px;
            border: 1px solid var(--gold);
            width: 100%;
            max-width: 500px;
            position: relative;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
        }

        .modal-title {
            font-family: var(--font-serif);
            color: var(--gold);
            margin-bottom: 30px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            background: #222;
            border: 1px solid #444;
            color: white;
            box-sizing: border-box;
        }

        .btn-submit {
            width: 100%;
            padding: 15px;
            background: var(--gold);
            border: none;
            color: black;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            text-transform: uppercase;
        }
        .btn-submit:hover { background: #fff; }

        /* Google Login Button */
        .btn-google {
            width: 100%;
            padding: 15px;
            background: #fff;
            color: #333;
            border: none;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .btn-google i { color: #db4437; } /* Google Red */

        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 20px 0;
            color: #666;
        }
        .divider::before, .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #333;
        }
        .divider:not(:empty)::before { margin-right: .5em; }
        .divider:not(:empty)::after { margin-left: .5em; }

        .toggle-auth {
            margin-top: 20px;
            color: #888;
            font-size: 0.9em;
        }
        .toggle-auth span {
            color: var(--gold);
            cursor: pointer;
            font-weight: bold;
        }

        /* --- HIỆU ỨNG --- */
        .show {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Styles cho Modal Content khi là danh sách (Wishlist/Cart) */
        .list-modal-content {
            max-width: 800px;
            text-align: left;
        }
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #333;
        }
        .list-item img {
            width: 100px;
            height: 60px;
            object-fit: cover;
            margin-right: 20px;
        }
        .list-item-info { flex-grow: 1; }
        .list-item-title { font-weight: bold; font-size: 1.1em; }
        .list-item-price { color: var(--gold); }
        .list-item-remove {
            color: #666;
            cursor: pointer;
            font-size: 1.2em;
            padding: 5px;
        }
        .list-item-remove:hover { color: red; }
        
        /* Budget Finder Styles */
        .budget-box { background: var(--card-bg); padding: 40px; max-width: 600px; margin: 0 auto; text-align: center; border: 1px solid var(--gold);}
        .budget-box input { width: 80%; padding: 15px; margin-bottom: 20px; background: #222; border: 1px solid #444; color: white; text-align: center; font-size: 1.1em;}
        .result-box { margin-top: 30px; font-size: 1.2em; padding: 20px; border: 1px solid #333; display: none; }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="showSection('hero')">X-CAR</div>
        <ul class="menu">
            <li><a onclick="showSection('hero')">HOME</a></li>
            <li><a onclick="showSection('discover')">DISCOVER MODELS</a></li>
            <li><a onclick="showSection('budget')">BUDGET FINDER</a></li>
            <li><a onclick="alert('Add Car feature is for Admins only.')" style="color: var(--gold);">+ ADD CAR</a></li>
        </ul>
        <div style="display: flex; align-items: center;">
            <div class="nav-icon-container" onclick="openModal('wishlist-modal')">
                <i class="fa-solid fa-heart"></i>
                <span class="badge-count" id="wishlist-count">0</span>
            </div>
            <div class="nav-icon-container" onclick="alert('Cart feature coming soon!')">
                <i class="fa-solid fa-cart-shopping"></i>
                <span class="badge-count">0</span>
            </div>
            <button class="btn-login-nav" onclick="openModal('login-modal')">LOGIN</button>
        </div>
    </nav>

    <section id="hero" class="hero">
        <div class="overlay"></div>
        <div class="hero-text">
            <h1>THE COLLECTION</h1>
            <p>Pinnacle of Automotive Engineering</p>
            <button class="btn-explore" onclick="showSection('discover')">EXPLORE MODELS</button>
        </div>
    </section>

    <section id="discover" class="section-container">
        <h2 class="section-title">The Fleet</h2>
        <div class="car-grid" id="car-list">
            </div>
    </section>

    <section id="budget" class="section-container">
        <h2 class="section-title">Budget Finder</h2>
        <div class="budget-box">
            <p style="margin-bottom: 20px; color: #888;">Enter your monthly income to calculate eligibility.</p>
            <input type="number" id="income-input" placeholder="Monthly Income (USD)">
            <button class="btn-submit" onclick="findBudgetCar()">Calculate Eligibility</button>
            <div class="result-box" id="budget-result"></div>
        </div>
    </section>

    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('login-modal')">&times;</span>
            <h2 class="modal-title" id="auth-title">Sign In</h2>
            
            <button class="btn-google" onclick="alert('Google Login simulation successful!')">
                <i class="fa-brands fa-google"></i> Continue with Google
            </button>
            
            <div class="divider">OR</div>

            <form id="auth-form">
                <div class="form-group" id="email-group" style="display: none;">
                    <input type="email" id="email" placeholder="Email Address">
                </div>
                <div class="form-group">
                    <input type="text" id="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" placeholder="Password" required>
                </div>
                <button type="submit" class="btn-submit" id="auth-btn">SIGN IN</button>
            </form>

            <div class="toggle-auth">
                <span id="toggle-text">Don't have an account?</span> 
                <span id="toggle-link" onclick="toggleAuthMode()">Sign up</span>
            </div>
        </div>
    </div>

    <div id="wishlist-modal" class="modal">
        <div class="modal-content list-modal-content">
            <span class="close-modal" onclick="closeModal('wishlist-modal')">&times;</span>
            <h2 class="modal-title" style="color: red;"><i class="fa-solid fa-heart"></i> Your Wishlist</h2>
            <div id="wishlist-items">
                </div>
        </div>
    </div>

    <script>
        // Dữ liệu xe mẫu (từ hình ảnh bạn cung cấp)
        let cars = [
            { id: 1, brand: "Lexus", name: "IS 500 F Sport Performance", price: 64020, img: "https://www.lexus.com/content/dam/lexus/images/models/is/2024/lexus-is-500-f-sport-performance-premium-rwd-caviar-front-three-quarter-view.jpg" },
            { id: 2, brand: "Mercedes", name: "Maybach S 450", price: 322800, img: "https://www.mercedes-benz.com.vn/content/dam/hq/as/passenger-cars/cars/s-class/maybach-z223/pad/image-gallery/mercedes-maybach-s-class-z223-pad-gallery-01-1664x1248-08-2020.jpg" },
            { id: 3, brand: "Porsche", name: "911 Carrera 4 GTS", price: 120000, img: "https://files.porsche.com/filestore/image/multimedia/none/992-gts-c4-modelimage-sideshot/model/c47e076c-6104-11eb-80d3-005056bbdc38;sDR;jpg;2000;x;911-Carrera-4-GTS.jpg" },
            { id: 4, brand: "Polestar", name: "3 Long range Dual motor", price: 93100, img: "https://www.polestar.com/dato-assets/11286/1665495171-polestar-3-hero-desktop.jpg?q=80&auto=format&w=2560&h=1440&fit=crop&crop=faces" },
            { id: 5, brand: "Bugatti", name: "Chiron", price: 3000000, img: "https://cdn.motor1.com/images/mgl/vEJmQ/s3/bugatti-chiron-pur-sport-front-3-4.jpg" }
        ];

        // Wishlist array to store liked car IDs
        let wishlist = [];

        // Hàm hiển thị các phần
        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(sec => {
                sec.classList.remove('show');
                sec.style.display = 'none';
            });
            const selectedSection = document.getElementById(sectionId);
            selectedSection.style.display = (sectionId === 'hero') ? 'flex' : 'block';
            setTimeout(() => selectedSection.classList.add('show'), 10);
            window.scrollTo(0,0);

            if (sectionId === 'discover') loadCars();
        }

        // Hàm tải danh sách xe
        function loadCars() {
            const carList = document.getElementById('car-list');
            carList.innerHTML = '';
            cars.forEach(car => {
                // Check if car is in wishlist to set the heart icon color
                const isWishlisted = wishlist.includes(car.id);
                const heartClass = isWishlisted ? 'fa-solid fa-heart active' : 'fa-regular fa-heart';

                carList.innerHTML += `
                    <div class="car-card">
                        <i class="${heartClass} wishlist-btn-card" onclick="toggleWishlist(${car.id})"></i>
                        <img src="${car.img}" alt="${car.name}">
                        <div class="car-info">
                            <div class="car-brand">${car.brand}</div>
                            <h3 class="car-title">${car.name}</h3>
                            <p class="car-price">$${car.price.toLocaleString()}</p>
                            <div class="btn-group">
                                <button class="btn-view">VIEW</button>
                                <button class="btn-add-cart" onclick="alert('Added to cart!')">ADD CART</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // --- WISHLIST LOGIC ---
        function toggleWishlist(carId) {
            const index = wishlist.indexOf(carId);
            if (index > -1) {
                wishlist.splice(index, 1); // Remove from wishlist
            } else {
                wishlist.push(carId); // Add to wishlist
            }
            updateWishlistCount();
            loadCars(); // Re-render grid to update icon state
            renderWishlistModal(); // Update modal content if open
        }

        function updateWishlistCount() {
            document.getElementById('wishlist-count').innerText = wishlist.length;
        }

        function renderWishlistModal() {
            const wishlistItemsContainer = document.getElementById('wishlist-items');
            wishlistItemsContainer.innerHTML = '';
            
            if (wishlist.length === 0) {
                wishlistItemsContainer.innerHTML = '<p style="color:#888; text-align:center;">Your wishlist is empty.</p>';
                return;
            }

            wishlist.forEach(carId => {
                const car = cars.find(c => c.id === carId);
                if (car) {
                    wishlistItemsContainer.innerHTML += `
                        <div class="list-item">
                            <img src="${car.img}" alt="${car.name}">
                            <div class="list-item-info">
                                <div class="list-item-title">${car.name}</div>
                                <div class="list-item-price">$${car.price.toLocaleString()}</div>
                            </div>
                            <i class="fa-solid fa-trash list-item-remove" onclick="toggleWishlist(${car.id})"></i>
                        </div>
                    `;
                }
            });
        }

        // --- MODAL LOGIC ---
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            if (modalId === 'wishlist-modal') {
                renderWishlistModal();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // --- LOGIN / REGISTER LOGIC ---
        let isRegisterMode = false;

        function toggleAuthMode() {
            isRegisterMode = !isRegisterMode;
            const title = document.getElementById('auth-title');
            const authBtn = document.getElementById('auth-btn');
            const toggleText = document.getElementById('toggle-text');
            const toggleLink = document.getElementById('toggle-link');
            const emailGroup = document.getElementById('email-group');

            if (isRegisterMode) {
                title.innerText = 'Create Account';
                authBtn.innerText = 'REGISTER';
                toggleText.innerText = 'Already have an account?';
                toggleLink.innerText = 'Sign in';
                emailGroup.style.display = 'block'; // Show email field
            } else {
                title.innerText = 'Sign In';
                authBtn.innerText = 'SIGN IN';
                toggleText.innerText = "Don't have an account?";
                toggleLink.innerText = 'Sign up';
                emailGroup.style.display = 'none'; // Hide email field
            }
        }

        document.getElementById('auth-form').addEventListener('submit', (e) => {
            e.preventDefault();
            if (isRegisterMode) {
                alert('Registration successful! Please sign in.');
                toggleAuthMode(); // Switch back to login
            } else {
                alert('Login successful!');
                closeModal('login-modal');
            }
            e.target.reset();
        });

        // --- BUDGET FINDER LOGIC ---
        function findBudgetCar() {
            const income = document.getElementById('income-input').value;
            const resultBox = document.getElementById('budget-result');
            resultBox.style.display = 'block';

            if (!income || income <= 0) {
                resultBox.innerHTML = '<span style="color:red;">Please enter a valid monthly income.</span>';
                return;
            }

            // Rule of thumb: Car price should not exceed 24 months of income
            const maxBudget = income * 24;
            
            // Find the most expensive car within budget
            const affordableCar = cars.filter(car => car.price <= maxBudget)
                                      .sort((a, b) => b.price - a.price)[0];

            if (affordableCar) {
                resultBox.innerHTML = `Based on your income, we recommend the <br><strong style="color:var(--gold); font-size: 1.2em;">${affordableCar.name}</strong> ($${affordableCar.price.toLocaleString()}).`;
            } else {
                resultBox.innerHTML = "It looks like you might need to save a bit more for these models. Keep grinding!";
            }
        }

        // Mặc định hiển thị trang chủ khi load
        showSection('hero');
    </script>
</body>
</html>
